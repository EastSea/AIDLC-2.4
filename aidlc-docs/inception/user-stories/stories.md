# User Stories

## 분류 기준: 기능 영역별

---

## 1. 테이블 로그인 (Table Login)

### US-1.1: 테이블 초기 설정
**As a** 매장 관리자  
**I want to** 테이블 태블릿에 매장 정보와 테이블 번호를 설정할 수 있다  
**So that** 고객이 해당 테이블에서 주문할 수 있다

**Acceptance Criteria:**
- [ ] 매장 식별자, 테이블 번호, 테이블 비밀번호를 입력할 수 있다
- [ ] 설정 완료 시 로그인 정보가 로컬에 저장된다
- [ ] 저장된 정보로 자동 로그인이 활성화된다
- [ ] 잘못된 정보 입력 시 에러 메시지가 표시된다

### US-1.2: 자동 로그인
**As a** 고객  
**I want to** 테이블 태블릿이 자동으로 로그인되어 있다  
**So that** 별도 로그인 없이 바로 주문할 수 있다

**Acceptance Criteria:**
- [ ] 태블릿 화면 접근 시 자동으로 로그인된다
- [ ] 로그인 후 메뉴 화면이 기본으로 표시된다
- [ ] 테이블 번호가 화면에 표시된다

---

## 2. 메뉴 조회 (Menu Browse)

### US-2.1: 카테고리별 메뉴 조회
**As a** 고객  
**I want to** 카테고리별로 메뉴를 탐색할 수 있다  
**So that** 원하는 종류의 메뉴를 쉽게 찾을 수 있다

**Acceptance Criteria:**
- [ ] 좌측에 카테고리 목록이 세로로 표시된다
- [ ] 카테고리 선택 시 해당 메뉴만 중앙에 표시된다
- [ ] 메뉴는 그리드 형태로 이미지, 메뉴명, 가격이 표시된다
- [ ] 카테고리 간 빠른 전환이 가능하다

### US-2.2: 메뉴 상세 정보 확인
**As a** 고객  
**I want to** 메뉴의 상세 정보를 확인할 수 있다  
**So that** 주문 전 메뉴에 대해 충분히 알 수 있다

**Acceptance Criteria:**
- [ ] 메뉴 카드 클릭 시 상세 정보가 표시된다
- [ ] 메뉴명, 가격, 설명, 이미지가 표시된다
- [ ] 상세 화면에서 장바구니에 담기가 가능하다

### US-2.3: 인원수별 메뉴 필터
**As a** 고객  
**I want to** 인원수에 맞는 메뉴를 필터링할 수 있다  
**So that** 우리 인원에 적합한 메뉴를 쉽게 찾을 수 있다

**Acceptance Criteria:**
- [ ] 전체, 1~2인, 3~4인 등 인원수 필터가 표시된다
- [ ] 필터 선택 시 해당 인원수 태그가 있는 메뉴만 표시된다
- [ ] 필터는 카테고리와 함께 적용된다

---

## 3. 장바구니 (Cart)

### US-3.1: 메뉴 장바구니 담기
**As a** 고객  
**I want to** 원하는 메뉴를 장바구니에 담을 수 있다  
**So that** 여러 메뉴를 한 번에 주문할 수 있다

**Acceptance Criteria:**
- [ ] 메뉴 카드에서 담기 버튼으로 장바구니에 추가된다
- [ ] 장바구니 아이콘에 담긴 수량이 표시된다
- [ ] 같은 메뉴 추가 시 수량이 증가한다

### US-3.2: 장바구니 수량 조절
**As a** 고객  
**I want to** 장바구니에 담긴 메뉴의 수량을 조절할 수 있다  
**So that** 주문 수량을 변경할 수 있다

**Acceptance Criteria:**
- [ ] +/- 버튼으로 수량 증가/감소가 가능하다
- [ ] 수량이 0이 되면 해당 메뉴가 장바구니에서 삭제된다
- [ ] 수량 변경 시 총 금액이 실시간으로 업데이트된다

### US-3.3: 장바구니 유지
**As a** 고객  
**I want to** 페이지를 새로고침해도 장바구니가 유지된다  
**So that** 실수로 새로고침해도 담은 메뉴가 사라지지 않는다

**Acceptance Criteria:**
- [ ] 장바구니 정보가 로컬 스토리지에 저장된다
- [ ] 페이지 새로고침 시 장바구니가 복원된다
- [ ] 주문 완료 시에만 장바구니가 비워진다

---

## 4. 주문 생성 (Order)

### US-4.1: 주문 확정
**As a** 고객  
**I want to** 장바구니의 메뉴를 주문할 수 있다  
**So that** 실제로 음식을 받을 수 있다

**Acceptance Criteria:**
- [ ] 주문하기 버튼 클릭 시 주문 내역 확인 화면이 표시된다
- [ ] 주문 확정 버튼으로 주문이 서버에 전송된다
- [ ] 주문 성공 시 주문 번호가 표시된다
- [ ] 주문 성공 후 장바구니가 자동으로 비워진다
- [ ] 주문 성공 후 메뉴 화면으로 자동 리다이렉트된다

### US-4.2: 주문 실패 처리
**As a** 고객  
**I want to** 주문 실패 시 에러 메시지를 확인할 수 있다  
**So that** 문제를 인지하고 다시 시도할 수 있다

**Acceptance Criteria:**
- [ ] 주문 실패 시 에러 메시지가 표시된다
- [ ] 장바구니 내용이 유지된다
- [ ] 재시도가 가능하다

---

## 5. 주문 내역 (Order History)

### US-5.1: 현재 세션 주문 조회
**As a** 고객  
**I want to** 현재 테이블에서 주문한 내역을 확인할 수 있다  
**So that** 무엇을 주문했는지 확인할 수 있다

**Acceptance Criteria:**
- [ ] 주문내역 버튼 클릭 시 주문 목록이 표시된다
- [ ] 현재 테이블 세션의 주문만 표시된다
- [ ] 주문 시간 순으로 정렬된다
- [ ] 주문별 주문 번호, 시각, 메뉴, 금액이 표시된다

### US-5.2: 주문 상태 확인
**As a** 고객  
**I want to** 주문의 현재 상태를 확인할 수 있다  
**So that** 음식이 언제 나올지 예상할 수 있다

**Acceptance Criteria:**
- [ ] 각 주문에 상태(대기중/준비중/완료)가 표시된다
- [ ] 상태별로 시각적 구분이 된다
- [ ] 상태 변경 시 실시간으로 업데이트된다 (SSE)

---

## 6. UI/UX

### US-6.1: 반응형 레이아웃
**As a** 고객  
**I want to** 다양한 화면 크기에서 편리하게 사용할 수 있다  
**So that** 모바일, 태블릿, 키오스크 어디서든 주문할 수 있다

**Acceptance Criteria:**
- [ ] Mobile (~480px)에서 적절한 레이아웃으로 표시된다
- [ ] Tablet (481~1024px)에서 적절한 레이아웃으로 표시된다
- [ ] Kiosk (1025px~)에서 적절한 레이아웃으로 표시된다
- [ ] 모든 버튼이 터치 친화적 크기(44x44px 이상)이다

### US-6.2: Idle Timeout
**As a** 매장 관리자  
**I want to** 고객이 사용하지 않으면 자동으로 홈 화면으로 돌아간다  
**So that** 다음 고객이 깨끗한 화면에서 시작할 수 있다

**Acceptance Criteria:**
- [ ] 60초간 입력이 없으면 자동으로 메뉴(홈) 화면으로 이동한다
- [ ] 상단에 남은 시간이 카운트다운으로 표시된다
- [ ] 터치/클릭 등 입력 발생 시 타이머가 60초로 초기화된다
- [ ] 장바구니는 Idle Timeout 시에도 유지된다

### US-6.3: 직원 호출
**As a** 고객  
**I want to** 직원을 호출할 수 있다  
**So that** 도움이 필요할 때 직원을 부를 수 있다

**Acceptance Criteria:**
- [ ] 직원호출 버튼이 하단에 표시된다
- [ ] 버튼 클릭 시 호출 요청이 서버로 전송된다
- [ ] 호출 성공 시 "호출되었습니다" 피드백이 표시된다
- [ ] 관리자 화면에 호출 알림이 표시된다

---

## 7. 매장 인증 (Admin Auth)

### US-7.1: 관리자 로그인
**As a** 매장 관리자  
**I want to** 관리자 화면에 로그인할 수 있다  
**So that** 매장 관리 기능을 사용할 수 있다

**Acceptance Criteria:**
- [ ] 매장 식별자, 사용자명, 비밀번호를 입력할 수 있다
- [ ] 로그인 성공 시 JWT 토큰이 발급된다
- [ ] 세션이 16시간 유지된다
- [ ] 브라우저 새로고침 시에도 세션이 유지된다
- [ ] 잘못된 정보 입력 시 에러 메시지가 표시된다

### US-7.2: 자동 로그아웃
**As a** 매장 관리자  
**I want to** 16시간 후 자동으로 로그아웃된다  
**So that** 보안이 유지된다

**Acceptance Criteria:**
- [ ] 16시간 후 자동으로 로그아웃된다
- [ ] 로그아웃 시 로그인 화면으로 이동한다

---

## 8. 실시간 주문 모니터링 (Order Monitoring)

### US-8.1: 실시간 주문 대시보드
**As a** 매장 관리자  
**I want to** 실시간으로 들어오는 주문을 확인할 수 있다  
**So that** 빠르게 주문을 처리할 수 있다

**Acceptance Criteria:**
- [ ] 테이블별 카드 형태로 주문이 표시된다
- [ ] 각 테이블 카드에 총 주문액이 표시된다
- [ ] 신규 주문 발생 시 2초 이내에 화면에 표시된다 (SSE)
- [ ] 신규 주문은 시각적으로 강조된다 (색상/애니메이션)

### US-8.2: 주문 상태 변경
**As a** 매장 관리자  
**I want to** 주문 상태를 변경할 수 있다  
**So that** 주문 처리 현황을 관리할 수 있다

**Acceptance Criteria:**
- [ ] 대기중 → 준비중 → 완료 순서로 상태 변경이 가능하다
- [ ] 상태 변경 시 고객 화면에 실시간 반영된다 (SSE)
- [ ] 상태별로 시각적 구분이 된다

### US-8.3: 주문 상세 보기
**As a** 매장 관리자  
**I want to** 주문의 상세 내역을 확인할 수 있다  
**So that** 정확한 주문 내용을 파악할 수 있다

**Acceptance Criteria:**
- [ ] 테이블 카드 클릭 시 전체 주문 목록이 표시된다
- [ ] 각 주문의 메뉴명, 수량, 금액이 표시된다

---

## 9. 테이블 관리 (Table Management)

### US-9.1: 주문 삭제
**As a** 매장 관리자  
**I want to** 잘못된 주문을 삭제할 수 있다  
**So that** 주문 오류를 수정할 수 있다

**Acceptance Criteria:**
- [ ] 주문 삭제 버튼이 표시된다
- [ ] 삭제 전 확인 팝업이 표시된다
- [ ] 삭제 시 테이블 총 주문액이 재계산된다
- [ ] 삭제 성공/실패 피드백이 표시된다

### US-9.2: 테이블 이용 완료
**As a** 매장 관리자  
**I want to** 테이블 이용 완료 처리를 할 수 있다  
**So that** 다음 고객을 위해 테이블을 초기화할 수 있다

**Acceptance Criteria:**
- [ ] 이용 완료 버튼이 표시된다
- [ ] 완료 전 확인 팝업이 표시된다
- [ ] 완료 시 해당 세션 주문이 과거 이력으로 이동한다
- [ ] 테이블 현재 주문 목록과 총 주문액이 0으로 리셋된다
- [ ] 고객 화면에서 이전 주문 내역이 표시되지 않는다

### US-9.3: 과거 주문 내역 조회
**As a** 매장 관리자  
**I want to** 테이블의 과거 주문 내역을 조회할 수 있다  
**So that** 이전 주문 기록을 확인할 수 있다

**Acceptance Criteria:**
- [ ] 과거 내역 버튼이 표시된다
- [ ] 테이블별 과거 주문 목록이 시간 역순으로 표시된다
- [ ] 각 주문의 주문 번호, 시각, 메뉴, 금액, 완료 시각이 표시된다
- [ ] 날짜 필터링이 가능하다
- [ ] 닫기 버튼으로 대시보드로 복귀한다

---

## 10. 메뉴 관리 (Menu Management)

### US-10.1: 메뉴 조회
**As a** 매장 관리자  
**I want to** 등록된 메뉴 목록을 조회할 수 있다  
**So that** 현재 메뉴 현황을 파악할 수 있다

**Acceptance Criteria:**
- [ ] 카테고리별로 메뉴 목록이 표시된다
- [ ] 메뉴명, 가격, 카테고리, 인원수 태그가 표시된다

### US-10.2: 메뉴 등록
**As a** 매장 관리자  
**I want to** 새로운 메뉴를 등록할 수 있다  
**So that** 메뉴를 추가할 수 있다

**Acceptance Criteria:**
- [ ] 메뉴명, 가격, 설명, 카테고리, 이미지, 인원수 태그를 입력할 수 있다
- [ ] 필수 필드 미입력 시 에러 메시지가 표시된다
- [ ] 등록 성공 시 메뉴 목록에 추가된다
- [ ] 이미지는 업로드하여 DB에 저장된다

### US-10.3: 메뉴 수정
**As a** 매장 관리자  
**I want to** 기존 메뉴 정보를 수정할 수 있다  
**So that** 메뉴 정보를 업데이트할 수 있다

**Acceptance Criteria:**
- [ ] 메뉴 선택 시 수정 화면이 표시된다
- [ ] 모든 필드를 수정할 수 있다
- [ ] 수정 성공 시 변경 사항이 반영된다

### US-10.4: 메뉴 삭제
**As a** 매장 관리자  
**I want to** 메뉴를 삭제할 수 있다  
**So that** 더 이상 판매하지 않는 메뉴를 제거할 수 있다

**Acceptance Criteria:**
- [ ] 삭제 버튼이 표시된다
- [ ] 삭제 전 확인 팝업이 표시된다
- [ ] 삭제 성공 시 메뉴 목록에서 제거된다

### US-10.5: 메뉴 순서 조정
**As a** 매장 관리자  
**I want to** 메뉴 노출 순서를 조정할 수 있다  
**So that** 원하는 순서로 메뉴를 배치할 수 있다

**Acceptance Criteria:**
- [ ] 드래그 앤 드롭 또는 순서 버튼으로 순서 변경이 가능하다
- [ ] 변경된 순서가 고객 화면에 반영된다

---

## Story-Persona Mapping

| Story ID | Persona |
|----------|---------|
| US-1.1 | 관리자 |
| US-1.2 ~ US-6.1 | 고객 |
| US-6.2 | 관리자 (고객 화면 대상) |
| US-6.3 | 고객 |
| US-7.1 ~ US-10.5 | 관리자 |
| US-11.1 ~ US-11.3 | 고객 (Chatbot) |
| US-12.1 ~ US-12.3 | 관리자 (Chatbot) |

---

## 11. 고객용 MCP Server (Customer MCP)

### US-11.1: 고객 Chatbot 테이블 컨텍스트 설정
**As a** 고객 (Chatbot 사용자)  
**I want to** Chatbot 사용 전 테이블 정보를 설정할 수 있다  
**So that** 내 테이블에서 주문할 수 있다

**Acceptance Criteria:**
- [ ] `set_table_context` Tool로 매장코드, 테이블번호, 비밀번호를 설정할 수 있다
- [ ] 컨텍스트 설정 성공 시 table_id와 session_id가 반환된다
- [ ] 컨텍스트 미설정 시 다른 Tool 호출이 거부된다
- [ ] 잘못된 정보 입력 시 에러 메시지가 반환된다

### US-11.2: 고객 Chatbot 메뉴 조회 및 주문
**As a** 고객 (Chatbot 사용자)  
**I want to** Chatbot을 통해 메뉴를 조회하고 주문할 수 있다  
**So that** 웹사이트 없이도 대화형으로 주문할 수 있다

**Acceptance Criteria:**
- [ ] MCP Tool로 카테고리별 메뉴 목록 조회가 가능하다
- [ ] MCP Tool로 메뉴 상세 정보 조회가 가능하다
- [ ] MCP Tool로 인원수별 메뉴 필터링이 가능하다
- [ ] MCP Tool로 장바구니에 메뉴 추가/수량 조절/삭제가 가능하다
- [ ] MCP Tool로 주문 생성이 가능하다

### US-11.3: 고객 Chatbot 주문 조회 및 직원 호출
**As a** 고객 (Chatbot 사용자)  
**I want to** Chatbot을 통해 주문 내역을 확인하고 직원을 호출할 수 있다  
**So that** 대화형으로 주문 상태를 확인할 수 있다

**Acceptance Criteria:**
- [ ] MCP Tool로 현재 세션 주문 내역 조회가 가능하다
- [ ] MCP Tool로 주문 상태 확인이 가능하다
- [ ] MCP Tool로 직원 호출이 가능하다

---

## 12. 관리자용 MCP Server (Admin MCP)

### US-12.1: 관리자 Chatbot 컨텍스트 설정
**As a** 매장 관리자 (Chatbot 사용자)  
**I want to** Chatbot 사용 전 관리자 인증을 할 수 있다  
**So that** 매장 관리 기능을 사용할 수 있다

**Acceptance Criteria:**
- [ ] `set_admin_context` Tool로 매장코드, 사용자명, 비밀번호를 설정할 수 있다
- [ ] 컨텍스트 설정 성공 시 store_id와 token이 반환된다
- [ ] 컨텍스트 미설정 시 다른 Tool 호출이 거부된다
- [ ] 잘못된 정보 입력 시 에러 메시지가 반환된다

### US-12.2: 관리자 Chatbot 주문 관리
**As a** 매장 관리자 (Chatbot 사용자)  
**I want to** Chatbot을 통해 주문을 관리할 수 있다  
**So that** 웹사이트 없이도 대화형으로 주문을 처리할 수 있다

**Acceptance Criteria:**
- [ ] MCP Tool로 실시간 주문 현황 조회가 가능하다
- [ ] MCP Tool로 테이블별 주문 상세 조회가 가능하다
- [ ] MCP Tool로 주문 상태 변경이 가능하다
- [ ] MCP Tool로 주문 삭제가 가능하다
- [ ] MCP Tool로 테이블 이용 완료 처리가 가능하다
- [ ] MCP Tool로 과거 주문 내역 조회가 가능하다

### US-12.2: 관리자 Chatbot 메뉴 관리
**As a** 매장 관리자 (Chatbot 사용자)  
**I want to** Chatbot을 통해 메뉴를 관리할 수 있다  
**So that** 대화형으로 메뉴 정보를 수정할 수 있다

**Acceptance Criteria:**
- [ ] MCP Tool로 메뉴 목록 조회가 가능하다
- [ ] MCP Tool로 메뉴 등록이 가능하다
- [ ] MCP Tool로 메뉴 수정이 가능하다
- [ ] MCP Tool로 메뉴 삭제가 가능하다
